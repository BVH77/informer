<div class="row justify-content-md-center">
    <div class="col-6">
        <h2>{{!create ? 'Edit' : 'Create'}} info</h2>
        <form name="form" (ngSubmit)="f.form.valid && submit()" #f="ngForm" novalidate>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !project.valid }">
                <label for="project">Project</label>
                <select class="form-control" [(ngModel)]="model.project" name="project"
                    #project="ngModel" [required]="!isAdmin">
                    <option [ngValue]="undefined" *ngIf="isAdmin">ALL PROJECTS</option>
                    <option *ngFor="let p of projects" [ngValue]="p._id">{{p.name}}</option>
                </select>
                <div *ngIf="f.submitted && !project.valid" class="help-block text-danger">*
                    required</div>
            </div>
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !text.valid }">
                <label for="text">Text</label>
                <textarea rows="5" class="form-control" name="text" [(ngModel)]="model.text"
                    #text="ngModel" required></textarea>
                <div *ngIf="f.submitted && !text.valid" class="help-block text-danger">*
                    required</div>
            </div>
            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" name="model.indefinite"
                    [(value)]="model.indefinite" [(ngModel)]="model.indefinite" />
                <label class="form-check-label">Indefinite</label>
            </div>
            <div class="form-group">
                <button [disabled]="loading" class="btn btn-primary">Save</button>
                <button [routerLink]="['']" class="btn btn-link">Cancel</button>
                <i class="fa fa-refresh fa-spin" [hidden]="!loading"></i>
            </div>
        </form>
    </div>
</div>
